<script>
  async function lancerGeneration() {
    const title = document.querySelector('input').value;
    const tags = document.querySelector('textarea').value;

    const response = await fetch('/api/generate-music', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ title, tags })
    });

    const data = await response.json();

    if (!response.ok) {
      alert(`Erreur API : ${data.error}`);
    } else {
      alert(`Tâche créée : ${data.taskId}`);
    }
  }
</script>